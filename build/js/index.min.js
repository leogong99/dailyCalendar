"use strict";this.JST=this.JST||{},this.JST.index=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var f,g,h="",i=this,j="function",k=this.escapeExpression;return h+=' <div class="container">\n	<div class="push-left">\n		',f=i.invokePartial(d.timeLineList,"timeLineList",b,c,d,e),(f||0===f)&&(h+=f),h+='\n	</div>\n	<div class="event-column push-left" style="height:',(g=c.eventBlockHeight)?f=g.call(b,{hash:{},data:e}):(g=b&&b.eventBlockHeight,f=typeof g===j?g.call(b,{hash:{},data:e}):g),h+=k(f)+'">\n		',f=i.invokePartial(d.eventBlockContainer,"eventBlockContainer",b,c,d,e),(f||0===f)&&(h+=f),h+="\n	</div>\n</div>"}),this.JST.eventBlockContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n	<div class="event" style="top: ',(e=c.top)?d=e.call(a,{hash:{},data:b}):(e=a&&a.top,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"; left: ",(e=c.left)?d=e.call(a,{hash:{},data:b}):(e=a&&a.left,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"; width: ",(e=c.width)?d=e.call(a,{hash:{},data:b}):(e=a&&a.width,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"; height: ",(e=c.height)?d=e.call(a,{hash:{},data:b}):(e=a&&a.height,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'">\n		<div class="event-bar"></div>\n		<div class="event-title">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'</div>\n		<div class="event-location">',(e=c.location)?d=e.call(a,{hash:{},data:b}):(e=a&&a.location,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"</div>\n	</div>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='\n<div id="eventContainer" class="events-wrap">\n',g=c.each.call(b,b&&b.events,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n</div>\n"}),this.JST.timeLineList=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,i="";return i+="\n	",e=c.if_even||a&&a.if_even,f={hash:{},inverse:m.program(4,h,b),fn:m.program(2,g,b),data:b},d=e?e.call(a,null==b||b===!1?b:b.index,f):n.call(a,"if_even",null==b||b===!1?b:b.index,f),(d||0===d)&&(i+=d),i+="\n"}function g(a,b){var d,e,f="";return f+='\n		<li> <span class="full-hour-label">',(e=c.time)?d=e.call(a,{hash:{},data:b}):(e=a&&a.time,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</span>",(e=c.ampm)?d=e.call(a,{hash:{},data:b}):(e=a&&a.ampm,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</li>\n	"}function h(a,b){var d,e,f="";return f+="\n		<li> <span>",(e=c.time)?d=e.call(a,{hash:{},data:b}):(e=a&&a.time,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</span></li>\n	"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this,n=c.helperMissing;return j+='<ul id="timeContainer" class="time-column">\n',i=c.each.call(b,b&&b.times,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+="\n</ul>\n"}),Handlebars.registerHelper("if_even",function(a,b){return a%2==0?b.fn(this):b.inverse(this)});var dayCal=dayCal||{};dayCal.calendar=function(){this.dailyEventsBlock=[]},dayCal.calendar.prototype={dailyEventFactory:function(a){if(!$.isArray(a))return!1;var b=0,c=!0,d={},e=a.length;for(a.sort(function(a,b){return a.start-b.start}),b=0;e>b&&c;b++)d=new dayCal.dailyEvent,c=d.setDailyEvent(a[b]),c&&this.addEvent(d);return c},findBusyBlockEnd:function(a){for(var b=a.end,c=a;null!==c;)b=b>c.end?b:c.end,c=c.overlaps;return b},addEvent:function(a){var b=this.dailyEventsBlock.length;if(0===b)return this.dailyEventsBlock[0]=new dayCal.overlapEventsBlock,void this.dailyEventsBlock[0].addEvent(a);var c=this.findBusyBlockEnd(this.dailyEventsBlock[b-1]);if(a.start>=c){var d=new dayCal.overlapEventsBlock;d.addEvent(a),this.dailyEventsBlock.push(d)}else this.dailyEventsBlock[b-1].addEvent(a)}};var dayCal=dayCal||{};dayCal.dailyEvent=function(){this.start=0,this.end=0,this.size=1},dayCal.dailyEvent.prototype={setDailyEvent:function(a){return $.isNumeric(a.start)&&$.isNumeric(a.end)?a.start>=a.end?!1:a.start<0||a.end>60*dayCal.SETTINGS.WORKINGHOUR?!1:(this.start=a.start,this.end=a.end,!0):!1},isOverlap:function(a){return this.start<=a.start&&this.end>a.start?!0:this.start>a.start&&a.end>this.start?!0:!1}};var dayCal=dayCal||{};dayCal.SETTINGS=new function(){return{STARTTIME:9,WORKINGHOUR:12}};var dayCal=dayCal||{};dayCal.overlapEventsBlock=function(){this.start=0,this.end=0,this.events=[],this.overSizeEvents=[],this.overlaps=null},dayCal.overlapEventsBlock.prototype={getDepth:function(){for(var a=this,b=0;null!==a;)a=a.overlaps,b++;return b},addEvent:function(a,b,c){var d=new dayCal.dailyEvent,c=void 0===c?this:c;return d.setDailyEvent({start:this.start,end:this.end}),0===this.events.length?(this.start=a.start,this.end=a.end,void this.events.push(a)):void(b?d.isOverlap(a)||(a.size++,this.overlaps?this.overlaps.addEvent(a,!0,c):c.overSizeEvents.push(a)):d.isOverlap(a)?(null===this.overlaps&&(this.overlaps=new dayCal.overlapEventsBlock),this.overlaps.addEvent(a,!1,c)):(this.events.push(a),this.end=this.end<a.end?a.end:this.end,this.overlaps.addEvent(a,!0,c)))},findOverSizeEventsWidth:function(a){var b=0,c=0,d=this.overSizeEvents.length,e=a.start,f=a.end,g=new dayCal.dailyEvent;for(b=0;d>b;b++)g.setDailyEvent({start:e,end:f}),this.overSizeEvents[b].isOverlap(g)&&(e=this.overSizeEvents[b].start<e?this.overSizeEvents[b].start:e,f=this.overSizeEvents[b].end>f?this.overSizeEvents[b].end:f,c++);return c}};var setUpCal=function(){var a={eventBlockHeight:0,times:[],events:[]},b=JST.index;Handlebars.registerPartial("eventBlockContainer",JST.eventBlockContainer),Handlebars.registerPartial("timeLineList",JST.timeLineList);var c=function(){var b=0,c=0,d="AM";for(b=0;b<=dayCal.SETTINGS.WORKINGHOUR;b++)c=b+dayCal.SETTINGS.STARTTIME,c>=12&&(d="PM"),c=c>12?c-12:c,a.times.push({time:c+":00 ",ampm:d}),b!=dayCal.SETTINGS.WORKINGHOUR&&a.times.push({time:c+":30 ",ampm:""})},d=function(b){var c=b,d=0,e=0,f=0,g=0,h=0,i=1,j=1;for(f=c.getDepth(),h=1/f;null!==c;){for(g++,e=c.events.length,d=0;e>d;d++)i=c.events[d].size,i>1&&(j=b.findOverSizeEventsWidth(c.events[d]),j>1&&(i/=j)),a.events.push({top:c.events[d].start+"px",left:(g-1)*h*100+"%",width:100*h*i+"%",height:c.events[d].end-c.events[d].start+"px",title:"Sample Event",location:"Sample Location"});c=c.overlaps}a.eventBlockHeight=60*dayCal.SETTINGS.WORKINGHOUR+"px"},e=function(b){a.datas=new dayCal.calendar,a.datas.dailyEventFactory(b),f()},f=function(){var b=0,c=a.datas.dailyEventsBlock.length,e={},f="";for(b=0;c>b;b++)e=a.datas.dailyEventsBlock[b],f+=d(e)};return function(d){a={eventBlockHeight:0,times:[],events:[]},c(),e(d),$("#content").empty().html(b(a))}}();setUpCal([{start:30,end:150},{start:540,end:600},{start:560,end:620},{start:610,end:670}]);